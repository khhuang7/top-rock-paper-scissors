<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Rock, Paper, Scissors</title>
  </head>

  <body>
    <button id="playButton" onclick = "playGame()">Let's play!</button>

    <script>
      let result;

      // Function generates a random integer 0, 1 or 2. Use this to randomly select between Rock, Paper or Scissors
      function getComputerChoice() {
        let random = Math.floor(Math.random() * 3);
        switch (random) {
          case 0:
            return "Rock";
          case 1:
            return "Paper";
          case 2:
            return "Scissors";
        }
      }

      function playRound(playerSelection, computerSelection) {
        // Assumes both parameters only have the first letter capitalized

        // For each possible player selection, and for each possible computer selection, return the outcome of the round
        switch (playerSelection) {
          case "Rock":
            switch (computerSelection) {
              case "Rock":
                result = 0.5;
                break;
              case "Paper":
                result = 0;
                break;
              case "Scissors":
                result = 1;
                break;
            }
          break;

          case "Paper":
          switch (computerSelection) {
              case "Rock":
                result = 1;
                break;
              case "Paper":
                result = 0.5;
                break;
              case "Scissors":
                result = 0;
                break;
            }
          break;


        case "Scissors":
          switch (computerSelection) {
              case "Rock":
                result = 0;
                break;
              case "Paper":
                result = 1;
                break;
              case "Scissors":
                result = 0.5;
                break;
            }
          break;
        }

        return reportOutcome(result, playerSelection, computerSelection);

      }

      // Report the outcome based on the result
      function reportOutcome(result, playerSelection, computerSelection) {
          switch (result) {
          case 0:
            return "You lose! " + computerSelection + " beats " + playerSelection;
          case 0.5: 
            return "It's a tie! You both chose " + computerSelection;
          case 1:
            return "You win! " + playerSelection + " beats " + computerSelection;
        }
      }


      // Test playRound function
      // let playerSelection = "SCISSORS";
      // playerSelection = playerSelection[0].toUpperCase() + playerSelection.slice(1).toLowerCase();
      // console.log(playerSelection);
      // const computerSelection = getComputerChoice();
      // console.log(computerSelection);
      // console.log(playRound(playerSelection, computerSelection));
      // console.log(result);

      function playGame() {
        // FOR 5 rounds
        let playerInput;
        let playerSelection;
        let totalScore = 0;
        let finalResult;
        let inputValidation = false;

        for (let i = 1; i <= 5; i++) {
          // Prompt player for input
          playerInput = prompt("Choose your weapon! Rock, Paper, or Scissors?");

          // Check that input is valid
          while (inputValidation === false) {
            if (playerInput === "") {
              playerInput = prompt("That's not a valid option. Please choose from: Rock, Paper or Scissors");
              continue;
            }
            playerSelection = playerInput[0].toUpperCase() + playerInput.slice(1).toLowerCase();
            if (!(playerSelection === "Rock" || playerSelection === "Paper" || playerSelection === "Scissors")) {
              playerInput = prompt("That's not a valid option. Please choose from: Rock, Paper or Scissors");
              continue;
            }
            inputValidation = true;
          }

          // Evaluate outcome of the game and report the outcome
          console.log(playRound(playerSelection, getComputerChoice()));

          // Add the outcome to the running score
          totalScore += result;

          // Reset input validation
          inputValidation = false;

        }
       
        // Report the overall winner based on the running score
        finalResult = "Your final score: " + totalScore + "\nComputer's final score: " + (5 - totalScore);

        if (totalScore < 2.5) {
          console.log("You lose! \n" + finalResult);
        } else if (totalScore > 2.5) {
          console.log("You win! \n" + finalResult);
        } else {
          console.log("It's a tie! \n" + finalResult);
        }

      }

    </script>
  </body>
  </html>